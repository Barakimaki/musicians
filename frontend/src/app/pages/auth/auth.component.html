<mat-card class="auth-card">
  <h2 class="auth-title">{{ isLoginMode ? 'Вход' : 'Регистрация' }}</h2>

  <form [formGroup]="authForm" (ngSubmit)="onSubmit()" class="auth-form">
    <!-- Email -->
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" type="email" required/>
      @if (authForm.get('email')?.hasError('required')) {
        <mat-error>Email обязателен</mat-error>
      }
      @if (authForm.get('email')?.hasError('email')) {
        <mat-error>Введите корректный email</mat-error>
      }
    </mat-form-field>

    @if (!isLoginMode) {
      <!-- Username (только для регистрации) -->
      <mat-form-field appearance="outline">
        <mat-label>Имя пользователя</mat-label>
        <input matInput formControlName="username" required/>
        @if (authForm.get('username')?.hasError('required')) {
          <mat-error>Имя пользователя обязательно</mat-error>
        }
        @if (authForm.get('username')?.hasError('minlength')) {
          <mat-error>Минимум 4 символа</mat-error>
        }
        @if (authForm.get('username')?.hasError('maxlength')) {
          <mat-error>Максимум 40 символов</mat-error>
        }
      </mat-form-field>
    }

    <!-- Password -->
    <mat-form-field appearance="outline">
      <mat-label>Пароль</mat-label>
      <input matInput formControlName="password" type="password" required/>
      @if (authForm.get('password')?.hasError('required')) {
        <mat-error>Пароль обязателен</mat-error>
      }
      @if (authForm.get('password')?.hasError('minlength')) {
        <mat-error>Минимум 6 символов</mat-error>
      }
      @if (authForm.get('password')?.hasError('maxlength')) {
        <mat-error>Максимум 40 символов</mat-error>
      }
    </mat-form-field>

    <!-- Submit Button -->
    <button mat-raised-button color="primary" type="submit" [disabled]="authForm.invalid || isLoading">
      {{ isLoginMode ? 'Войти' : 'Зарегистрироваться' }}
    </button>

    <!-- Error Message -->
    @if (error) {
      <div class="auth-error">{{ error }}</div>
    }
  </form>

  <!-- Switch Mode -->
  <div class="auth-switch">
    <span>{{ isLoginMode ? 'Нет аккаунта?' : 'Уже есть аккаунт?' }}</span>
    <a (click)="onSwitchMode()">{{ isLoginMode ? 'Зарегистрироваться' : 'Войти' }}</a>
  </div>
</mat-card>
